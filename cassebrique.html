<!DOCTYPE html>
<html>
<head>
  <title>Casse-brique en JavaScript</title>
  <style>
    svg {
      border: 1px solid black;
    }
  </style>
</head>
<body>
  <svg id="game" width="600" height="400"></svg>

  <script>
    // Créer une classe Brick pour représenter les briques
    function Brick(x, y, width, height, color) {
      this.x = x;
      this.y = y;
      this.width = width;
      this.height = height;
      this.color = color;
      this.svgElement = document.createElementNS("http://www.w3.org/2000/svg", "rect");
      this.svgElement.setAttribute("x", this.x);
      this.svgElement.setAttribute("y", this.y);
      this.svgElement.setAttribute("width", this.width);
      this.svgElement.setAttribute("height", this.height);
      this.svgElement.setAttribute("fill", this.color);
      document.getElementById("game").appendChild(this.svgElement);
    }

    // Créer une classe Ball pour représenter la balle
    function Ball(x, y, radius, color) {
      this.x = x;
      this.y = y;
      this.radius = radius;
      this.color = color;
      this.svgElement = document.createElementNS("http://www.w3.org/2000/svg", "circle");
      this.svgElement.setAttribute("cx", this.x);
      this.svgElement.setAttribute("cy", this.y);
      this.svgElement.setAttribute("r", this.radius);
      this.svgElement.setAttribute("fill", this.color);
      document.getElementById("game").appendChild(this.svgElement);
    }

    // Créer une classe Paddle pour représenter la raquette
    function Paddle(x, y, width, height, color) {
      this.x = x;
      this.y = y;
      this.width = width;
      this.height = height;
      this.color = color;
      this.svgElement = document.createElementNS("http://www.w3.org/2000/svg", "rect");
      this.svgElement.setAttribute("x", this.x);
      this.svgElement.setAttribute("y", this.y);
      this.svgElement.setAttribute("width", this.width);
      this.svgElement.setAttribute("height", this.height);
      this.svgElement.setAttribute("fill", this.color);
      document.getElementById("game").appendChild(this.svgElement);
    }

    // Créer une fonction pour déplacer la raquette en réponse aux événements utilisateur
    Paddle.prototype.move = function(event) {
      var x = event.clientX - document.getElementById("game").getBoundingClientRect().left - this.width/2;
      if (x < 0) {
        x = 0;
      }
      if (x > document.getElementById("game").getAttribute("width") - this.width) {
        x = document.getElementById("game").getAttribute("width") - this.width;
      }
      this.x = x;
      this.svgElement.setAttribute("x", this.x);
    };

    // Créer une fonction pour animer la balle et la faire rebondir sur les bords du jeu
    function animateBall(ball, dx, dy, bricks, paddle) {
      ball.x += dx;
      ball.y += dy;
      ball.svgElement.setAttribute("cx", ball.x);
      ball.svgElement.setAttribute("cy", ball.y);
      if (ball.x - ball.radius < 0 || ball.x + ball.radius > document.getElementById("game").getAttribute("width")) {
       
        dx = -dx;
  }
  if (ball.y - ball.radius < 0) {
    dy = -dy;
  } else if (ball.y + ball.radius > document.getElementById("game").getAttribute("height")) {
    alert("Perdu !");
    clearInterval(intervalId);
  } else if (ball.y + ball.radius > paddle.y && ball.x > paddle.x && ball.x < paddle.x + paddle.width) {
    dy = -dy;
  } else {
    for (var i = 0; i < bricks.length; i++) {
      if (ball.y - ball.radius < bricks[i].y + bricks[i].height && ball.x > bricks[i].x && ball.x < bricks[i].x + bricks[i].width) {
        dy = -dy;
        document.getElementById("game").removeChild(bricks[i].svgElement);
        bricks.splice(i, 1);
        if (bricks.length === 0) {
          alert("Gagné !");
          clearInterval(intervalId);
        }
        break;
      }
    }
  }
  return [dx, dy];
}

// Initialiser le jeu
var bricks = [];
for (var i = 0; i < 6; i++) {
  for (var j = 0; j < 10; j++) {
    bricks.push(new Brick(j * 60, i * 20 + 50, 60, 20, "red"));
  }
}
var ball = new Ball(300, 200, 10, "blue");
var paddle = new Paddle(270, 380, 60, 10, "green");

// Ajouter des événements pour déplacer la raquette en réponse aux mouvements de souris
document.addEventListener("mousemove", function(event) {
  paddle.move(event);
});

// Animer le jeu
var intervalId = setInterval(function() {
  var dx = 5;
  var dy = -5;
  var velocities = animateBall(ball, dx, dy, bricks, paddle);
  dx = velocities[0];
  dy = velocities[1];
}, 50);
</script>
</body>
</html>